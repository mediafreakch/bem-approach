<template>

  <h1 class="h1">E-Mail-Addresse aktualisieren</h1>

  <p>Bitte bestätigen Sie die Aktualisierung Ihrer E-Mail-Adresse noch mit der Eingabe Ihres Ricardo-Konto-Passworts.</p>

  <div class="formItem formItem-password">
    <label for="password-eyed">Passwort Konto ricardo.ch</label>
    <input v-model="password" lazy type="password" id="password-eyed" name="text-icon" /><span class="icon icon-eyeClosed input_action"></span>
  </div>

  <button class="btn btn-primary btn-block" :class="{ 'btn-success': isPwCorrect }" @click="verifyPw">Aktualisierung bestätigen</button>

</template>

<script>
  var formElements = require('element~form-elements');

  module.exports = {
    data: function() {
      return {
        password: null,
        token: null,
        isPwCorrect: false
      }
    },
    route: {
      data: function(transition) {
        transition.next({
          token: transition.to.params.token
        });
      }
    },
    methods: {
      verifyPw: function(event) {
        // usually you would verify login credentials here
        if (this.password === 'test') {
          this.isPwCorrect = true;
          this.redirectToVerification();
        }

        return false;
      },
      redirectToVerification: function() {
        this.$route.router.go({
          name: 'verify-email-token',
          params: this.token
        });
      }
    }
  };
</script>
