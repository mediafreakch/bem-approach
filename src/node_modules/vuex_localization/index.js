'use strict';

var locals = require('app_localization');

// state
var state = {
  locals: {}
}

// getters
var getters = {
  locals: function(state) {
    return state.locals;
  }
}

// mutations
var mutations = {
  EXTEND_LOCALS: function( state, localsToExtend ) {
    var local;
    for ( var key in localsToExtend ) {
      if ( localsToExtend.hasOwnProperty( key ) ) {
        local = localsToExtend[key];
        if (!state.locals[local.key]) state.locals[local.id] = {};
        state.locals[ local.id ] = local;
      }
    }
  }
}

// Actions
var actions = {
  extendLocals: function(store, localsToExtend) {
    store.commit('EXTEND_LOCALS', localsToExtend);
  },
  getLocals: function(store) {
    return new Promise(function(resolve, reject) {
      resolve(locals);
    }).then(function(data) {
      store.commit('EXTEND_LOCALS', data);
    })
  }
}

module.exports = {
  state: state,
  mutations: mutations,
  actions: actions,
  getters: getters
}
