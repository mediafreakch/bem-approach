<style lang="less">
  @import "style/index.less";
</style>

<template>
  <ric-inline-navigation>
    <li class="inline-nav_item" :class="{'active': $route.params.local === 'de-ch'}">
      <a
        lang="de"
        title="Auf Deutsch wechseln"
        v-link="{path: deChPath}"
      >DE</a>
    </li>
    <li class="inline-nav_item" :class="{'active': $route.params.local === 'fr-ch'}">
      <a
        lang="fr"
        title="Accéder à la version française"
        v-link="{path: frChPath}"
      >FR</a>
    </li>
  </ric-inline-navigation>
</template>

<script>
  var inlineNavigation = require('component_inline-navigation');
  
  module.exports = {
    components: {
      'ric-inline-navigation': inlineNavigation
    },
    vuex: {
      getters: {
        locals: function(state) {
          return state.localization.locals
        }
      }
    },
    computed: {
      deChPath: function() {
        var result = this.$route.path;
        
        for(var localKey in this.locals) {
          if (this.locals.hasOwnProperty(localKey)) {
            result = result.replace(this.locals[localKey].id, 'de-ch');
          }
        }
        return result;
      },
      frChPath: function() {
        var result = this.$route.path;
  
        for(var localKey in (this.locals)) {
          if (this.locals.hasOwnProperty(localKey)) {
            result = result.replace(this.locals[localKey].id, 'fr-ch');
          }
        }
        return result;
      }
    }
  }
</script>